!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jest-matcher-utils"),require("rxjs"),require("jest-diff"),require("rxjs/testing"),require("expect/build/jasmineUtils")):"function"==typeof define&&define.amd?define("JestMarbles",["jest-matcher-utils","rxjs","jest-diff","rxjs/testing","expect/build/jasmineUtils"],e):"object"==typeof exports?exports.JestMarbles=e(require("jest-matcher-utils"),require("rxjs"),require("jest-diff"),require("rxjs/testing"),require("expect/build/jasmineUtils")):t.JestMarbles=e(t["jest-matcher-utils"],t.rxjs,t["jest-diff"],t["rxjs/testing"],t["expect/build/jasmineUtils"])}("undefined"!=typeof self?self:this,(function(t,e,n,r,i){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e){t.exports=r},function(t,e){t.exports=i},function(t,e,n){t.exports=n(6)},function(t,e,n){"use strict";n.r(e),n.d(e,"Scheduler",(function(){return g})),n.d(e,"hot",(function(){return S})),n.d(e,"cold",(function(){return E})),n.d(e,"time",(function(){return _}));var r,i=n(1),o=n(3),u=n(4),c=n(2),s=n(0);!function(t){t.Completion="|",t.Error="#",t.TimeFrame="-",t.Subscription="^",t.Unsubscription="!",t.GroupStart="(",t.GroupEnd=")"}(r||(r={}));var a=function(){function t(t){this.start=t,this.marbles=""}return Object.defineProperty(t.prototype,"end",{get:function(){return this.start+this.marbles.length},enumerable:!1,configurable:!0}),t}(),f={},l={N:f,C:r.Completion,E:r.Error},p=function(){function t(){}return t.marblize=function(e){for(var n=t.getNotificationEvents(e),i="",o=0,u=0;o<n.length;u=n[o].end,o++)i=""+i+(r.TimeFrame.repeat(n[o].start-u)+n[o].marbles);return i},t.marblizeSubscriptions=function(t){var e=this;return t.map((function(t){return e.marblizeLogEntry(t.subscribedFrame/10,r.Subscription)+e.marblizeLogEntry((t.unsubscribedFrame-t.subscribedFrame)/10-1,r.Unsubscription)}))},t.marblizeLogEntry=function(t,e){return t!==1/0?r.TimeFrame.repeat(t)+e:""},t.getNotificationEvents=function(e){var n=e.reduce((function(e,n){return e[n.frame]||(e[n.frame]=new a(n.frame/10)),e[n.frame].marbles+=t.extractMarble(n),e}),{}),r=Object.keys(n).map((function(t){return n[t]}));return t.encloseGroupEvents(r),r},t.extractMarble=function(t){var e=l[t.notification.kind];return e===f&&(e=t.notification.value),e},t.encloseGroupEvents=function(t){t.forEach((function(t){t.marbles.length>1&&(t.marbles=""+r.GroupStart+t.marbles+r.GroupEnd)}))},t}();function b(t){var e=t.notification.value;return"string"==typeof e&&1===e.length||void 0!==e&&1===JSON.stringify(e).length}var d={toBeNotifications:function(t,e){var n=t,r=e;(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.every((function(t){return t.filter((function(t){return"N"===t.notification.kind})).every(b)}))})(t,e)&&(n=p.marblize(t),r=p.marblize(e));var i=Object(u.equals)(n,r);return{actual:t,message:i?function(){return Object(s.matcherHint)(".not.toBeNotifications")+"\n\nExpected notifications to not be:\n  "+Object(s.printExpected)(r)+"\nBut got:\n  "+Object(s.printReceived)(n)}:function(){var t=Object(c.diff)(r,n,{expand:!0});return Object(s.matcherHint)(".toBeNotifications")+"\n\nExpected notifications to be:\n  "+Object(s.printExpected)(r)+"\nBut got:\n  "+Object(s.printReceived)(n)+(t?"\n\nDifference:\n\n"+t:"")},pass:i}},toBeSubscriptions:function(t,e){var n=p.marblizeSubscriptions(t),r=p.marblizeSubscriptions(e),i=function(t,e){if(t.length!==e.length)return!1;for(var n=!0,r=0,i=t;r<i.length;r++){var o=i[r];if(!e.includes(o)){n=!1;break}}return n}(n,r);return{actual:t,message:i?function(){return Object(s.matcherHint)(".not.toHaveSubscriptions")+"\n\nExpected observable to not have the following subscription points:\n  "+Object(s.printExpected)(r)+"\nBut got:\n  "+Object(s.printReceived)(n)}:function(){var t=Object(c.diff)(r,n,{expand:!0});return Object(s.matcherHint)(".toHaveSubscriptions")+"\n\nExpected observable to have the following subscription points:\n  "+Object(s.printExpected)(r)+"\nBut got:\n  "+Object(s.printReceived)(n)+(t?"\n\nDifference:\n\n"+t:"")},pass:i}},toHaveEmptySubscriptions:function(t){var e,n=!(t&&t.length>0);return t&&t.length>0&&(e=p.marblizeSubscriptions(t)),{actual:t,message:n?function(){return Object(s.matcherHint)(".not.toHaveNoSubscriptions")+"\n\nExpected observable to have at least one subscription point, but got nothing"+Object(s.printReceived)("")}:function(){return Object(s.matcherHint)(".toHaveNoSubscriptions")+"\n\nExpected observable to have no subscription points\nBut got:\n  "+Object(s.printReceived)(e)+"\n\n"},pass:n}}};function v(t,e){e&&(!function(t,e){return 0===e.length&&0!==t.length&&void 0!==t[0].subscribedFrame}(t,e)?!function(t,e){return 0===t.length&&0===e.length||0!==e.length&&void 0!==e[0].subscribedFrame}(t,e)?expect(t).toBeNotifications(e):expect(t).toBeSubscriptions(e):expect(t).toHaveEmptySubscriptions())}expect.extend(d);var m,g=function(){function t(){}return t.init=function(){t.instance=new o.TestScheduler(v)},t.get=function(){if(t.instance)return t.instance;throw new Error("Scheduler is not initialized")},t.reset=function(){t.instance=null},t.materializeInnerObservable=function(e,n){return t.get().materializeInnerObservable(e,n)},t}(),h=(m=function(t,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),j=function(t){function e(e,n,r){var i=t.call(this)||this;return i.marbles=e,i.values=n,i.error=r,i.source=g.get().createColdObservable(e,n,r),i}return h(e,t),e.prototype.getSubscriptions=function(){return this.source.subscriptions},e}(i.Observable),x=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=function(t){function e(e,n,r){var i=t.call(this)||this;return i.marbles=e,i.values=n,i.error=r,i.source=g.get().createHotObservable(e,n,r),i}return x(e,t),e.prototype.getSubscriptions=function(){return this.source.subscriptions},e}(i.Observable);function O(t){return t.replace(/^[ ]+/,"")}function S(t,e,n){return new y(O(t),e,n)}function E(t,e,n){return new j(O(t),e,n)}function _(t){return g.get().createTime(O(t))}var w={message:function(){return""},pass:!0};expect.extend({toHaveSubscriptions:function(t,e){var n=Array.isArray(e)?e.map(O):O(e);return g.get().expectSubscriptions(t.getSubscriptions()).toBe(n),w},toHaveNoSubscriptions:function(t){return g.get().expectSubscriptions(t.getSubscriptions()).toBe([]),w},toBeObservable:function(t,e){return g.get().expectObservable(t).toBe(e.marbles,e.values,e.error),w},toBeMarble:function(t,e){return g.get().expectObservable(t).toBe(O(e)),w},toSatisfyOnFlush:function(t,e){g.get().expectObservable(t);var n=g.get().flushTests;return n[n.length-1].ready=!0,B.push(e),w}});var B=[];beforeEach((function(){g.init(),B=[]})),afterEach((function(){for(g.get().flush();B.length>0;)B.shift()();g.reset()}))}])}));
//# sourceMappingURL=jest-marbles.min.js.map